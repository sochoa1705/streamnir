<div class="container__page">
	<div class="container__page__metasearch">
		<div class="container__page__metasearch__section">
			<app-tab-vuelos-v2 [typeFlight]="flightType" [params]="params" (reloadPageResult)="reloadPageResult()"></app-tab-vuelos-v2>
		</div>
		<div class="container__page__metasearch__mobile">
			<div class="d-flex justify-content-between align-items-start">
				<div class="sumary">
					<div class="sumary__destination">
						<span>Los Angeles</span>
						<img src="./assets/svg/arrow-destination.svg" alt="->">
						<span>Lima</span>
					</div>
					<div class="sumary__date">
						<span>Sábado 26 de mayo</span> <span>-</span> <span>Sábado 09 junio</span>
					</div>
				</div>
				<div class="actions">
					<img src="./assets/svg/pencil.svg" alt="icon">
					<span>Editar</span>
				</div>
			</div>
			<div  class="container__page__metasearch__mobile__filters">
				<ng-container *ngTemplateOutlet="appfilters"></ng-container>
			</div>
		</div>
	</div>
	<section *ngIf="!showError && !showNotResults">
		<article>
		<ng-container *ngTemplateOutlet="appfilters"></ng-container>
		<div class="container__page__results">
			<app-sort-by
				#childSort
				[hidden]="dataFilterGroups.length == 0"
				[theCheapest]="theCheapest"
				[betterOption]="betterOption"
				[currency]="currency"
				[shorterDuration]="shorterDuration"
				[arrayMoreOptionsSort]="arrayMoreOptionsSort"
				(clickTabSort)="clickTabSort($event)"
			></app-sort-by>
			<div class="container__page__results__cards" *ngIf="isLoader">
				<ng-container *ngFor="let item of [].constructor(3)">
					<app-card-loader-result></app-card-loader-result>
				</ng-container>
			</div>
			<ng-container *ngIf="dataFilterGroups.length > 0">
				<div class="container__page__results__cards" *ngIf="dataGroupsPaginate.length > 0">
					<ng-container *ngFor="let item of dataGroupsPaginate">
						<app-card-result-search [idCheap]="idCheap" [idBest]="idBest" [flight]="item" [currency]="currency" [sortBy]="sortBy"></app-card-result-search>
					</ng-container>
				</div>
				<div class="container__page__results__button" *ngIf="dataGroupsPaginate.length !== dataFilterGroups.length">
					<app-button [text]="'Mostrar más resultados'" [color]="'outline-primary'" (onClick)="showMoreResults()"></app-button>
				</div>
			</ng-container>
			<app-not-results
				*ngIf="dataFilterGroups.length == 0 && !isLoader"
				[filters]="filters"
				[title]="titleNotResults"
				[type]="'not-result-filter'"
				(cleanFilters)="cleanFilters($event)"
			></app-not-results>
		</div>
		</article>
	</section>

	<app-not-results *ngIf="showError"></app-not-results>
	<app-not-results *ngIf="showNotResults" [title]="titleNotResults" [type]="'not-result'"></app-not-results>
</div>


<ng-template #appfilters>
	<app-filters
	[dataAirlines]="dataAirlines"
	[dataScaleFilter]="dataScaleFilter"
	[dataBagFilter]="dataBagFilter"
	[totalResults]="allDataGroups.length || 0"
	[totalResultsFilter]="dataFilterGroups.length || 0"
	[exchangeRate]="exchangeRate"
	(changeArrayFilters)="changeArrayFilters($event)"
	(updateArrayAirlinesFilter)="updateArrayAirlinesFilter($event)"
	(changeExchangeRate)="changeExchangeRate($event)"
	(filterByPrice)="filterByPrice($event)"
	(filterByDuration)="filterByDuration($event)"
	[minPrice]="minPrice"
	[maxPrice]="maxPrice"
	[isNotResult]="showNotResults"
	[valuesFilterDuration]="valuesFilterDuration"
	(resetFilterByDuration)="resetFilterByDuration()"
	(filterByDurationScale)="filterByDurationScale($event)"
></app-filters>
</ng-template>